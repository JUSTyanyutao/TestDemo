define(["zepto","underscore","backbone","app/utils","text!templates/addresses.html"],function(b,i,h,g,e){var d=b("#addresses-page");var k;var c;var f;var a=h.View.extend({el:d,render:function(l){g.showPage(d,function(){d.empty().append(e);
f=l;k=d.find(".addresses-container");c=d.find("#address-template");j();});},events:{"tap .btn-add-address":"addAddress","tap .address-item":"editAddress"},editAddress:function(n){var l=b(n.currentTarget).data("id");
if(f=="balance"){var m=b.extend({},JSON.parse(g.storage.get("balance")),{addressId:l});g.storage.set("balance",JSON.stringify(m));window.location.replace("#balance");
}else{window.location.hash="address/"+l;}},addAddress:function(){window.location.hash="address";}});var j=function(){b.ajax({url:window.ctx+"/address",type:"GET",dataType:"json",success:function(m){var l=i.template(c.text());
k.empty().append(l(m));}});};return a;});